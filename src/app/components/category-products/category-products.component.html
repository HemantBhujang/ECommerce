<div class="product-section py-5">
  <div class="container">
    <div class="header-container mb-4">
      <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a [routerLink]="['/', category]" class="text-decoration-none">{{
              category
            }}</a>
          </li>
          <li
            class="breadcrumb-item active text-capitalize"
            aria-current="page"
          >
            <a
              [routerLink]="['/', category, parent]"
              class="text-decoration-none"
              >{{ parent }}</a
            >
          </li>
          <li
            class="breadcrumb-item active text-capitalize"
            aria-current="page"
          >
            {{ sub }}
          </li>
        </ol>
      </nav>
    </div>
    <div class="row g-4">
      <div class="col-6 col-md-3 mb-4" *ngFor="let product of products">
        <div class="product-card h-100 shadow-sm rounded overflow-hidden">
          <div class="product-image-container position-relative">
            <img
              [src]="product.image"
              class="card-img-top product-image"
              alt="{{ product.name }}"
              (click)="goToDetails(product.id!)"
            />
            <div class="product-actions">
              <button
                class="btn action-btn wishlist-btn"
                (click)="toggleWishlist(product); $event.stopPropagation()"
              >
                <i
                  [class]="
                    isInWishlist(product.id!)
                      ? 'bi bi-heart-fill text-danger'
                      : 'bi bi-heart'
                  "
                ></i>
              </button>
              <button
                class="btn action-btn cart-btn"
                (click)="goToDetails(product.id!); $event.stopPropagation()"
              >
                <i class="bi bi-eye"></i>
              </button>
            </div>
          </div>
          <div class="product-info p-3">
            <h6 class="product-title" (click)="goToDetails(product.id!)">
              {{ product.name }}
            </h6>
            <div class="d-flex justify-content-between align-items-center">
              <div class="product-price">
                <span class="new-price fw-bold"
                  >₹{{ product.discount_price }}</span
                >
                <span
                  class="old-price text-decoration-line-through text-muted small ms-2"
                  >₹{{ product.old_price }}</span
                >
              </div>
              <button
                class="btn btn-sm cart-action-btn"
                [ngClass]="isInCart(product.id!) ? 'btn-success' : 'btn-cart'"
                (click)="
                  isInCart(product.id!) ? goToCart() : addToCart(product);
                  $event.stopPropagation()
                "
              >
                {{ isInCart(product.id!) ? "Go to Cart" : "Add to Cart" }}
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
